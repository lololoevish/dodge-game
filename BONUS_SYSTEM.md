# Проект системы улучшений/бонусов для игры "Dodge Game"

Этот документ описывает дизайн и техническую реализацию системы бонусов для игры "Dodge Game".

## 1. Типы бонусов

Были предложены и реализованы следующие типы бонусов:

| Название | Эффект | Продолжительность |
|---|---|---|
| **Невидимость (Invisibility)** | Игрок становится невидимым для врагов, но сам может видеть врагов. | 7 секунд |
| **Щит (Shield)** | Игрок становится неуязвимым к столкновениям с врагами. | 5 секунд |
| **Замедление (Slow Enemies)** | Скорость всех врагов на экране уменьшается на 50%. | 8 секунд |
| **Увеличение (Size Up)** | Размер игрока увеличивается в 2 раза, что значительно усложняет уклонение. | 15 секунд |
| **Время (Extra Time)** | Игроку начисляется 10 дополнительных очков. | Мгновенно |

## 2. Механика появления

- **Частота**: Бонусы появляются на игровом поле каждые 20 секунд.
- **Случайность**: Тип и местоположение каждого бонуса определяются случайным образом.
- **Ограничение**: Одновременно на поле может находиться только один бонус.
- **Расположение**: Бонусы не появляются слишком близко к границам поля или к другим объектам.

## 3. Взаимодействие с игроком

- **Подбор**: Игрок подбирает бонус, соприкоснувшись с ним.
- **Активация**: При подборе бонус немедленно активируется, а его иконка и таймер действия появляются в интерфейсе.
- **Визуализация**: Бонусы представлены яркими, анимированными объектами, чтобы их было легко отличить от врагов. Каждый тип бонуса имеет уникальный дизайн.
- **Индикация**: Активные бонусы и оставшееся время их действия отображаются на специальной панели в верхней части экрана.
- **Звук**: Подбор бонуса сопровождается звуковым эффектом.

## 4. Технический дизайн

### 4.1. Новые типы данных (`src/types/game.ts`)

Для реализации системы бонусов были добавлены следующие типы и интерфейсы:

- **`BonusType`**: `enum` для определения типов бонусов (`SHIELD`, `SLOW_ENEMIES`, `SIZE_UP`, `INVISIBILITY`, `EXTRA_TIME`).
- **`Bonus`**: Интерфейс для объектов-бонусов на игровом поле, наследуется от `GameObject`.
- **`ActiveBonus`**: Интерфейс для отслеживания активных бонусов у игрока.
- **`GameState`**: Обновлен для включения массива `activeBonuses`.
- **`GameConfig`**: Расширен параметрами для настройки бонусов (время появления, длительность, размеры и т.д.).

### 4.2. Логика игры (`src/lib/gameLogic.ts`)

- **`spawnBonus`**: Новая функция для создания и размещения бонуса на игровом поле.
- **`applyBonus`**: Функция, которая вызывается при подборе бонуса игроком. Она добавляет бонус в список активных и применяет его эффект (например, увеличивает счет).
- **`updateActiveBonuses`**: Функция для проверки и деактивации бонусов с истекшим сроком действия.
- **`updateGameEntities`**: Основной игровой цикл был обновлен для:
    - Применения эффектов от активных бонусов (замедление врагов, изменение размера и прозрачности игрока).
    - Проверки столкновений игрока с бонусами.
- **`checkGameOver`**: Функция была изменена, чтобы учитывать неуязвимость игрока при активном бонусе "Щит".

### 4.3. Отображение (`src/components/game/GameCanvas.tsx`)

- **Спавн бонусов**: В игровой цикл (`gameLoop`) добавлена логика для периодического вызова `spawnBonus`.
- **Рендеринг**: Функция `render` была обновлена для отрисовки бонусов на `canvas`. Каждый бонус отображается с иконкой, соответствующей его типу.
- **Конфигурация**: В `gameConfig` и `baseConfig` добавлены параметры для настройки бонусов.